{"version":3,"sources":["assets/McHeart.png","pages/Home/Home.tsx","pages/FaceApi/FaceApi.tsx","Routes.tsx","App.tsx","index.tsx"],"names":["Wrapper","styled","div","expressionMap","neutral","happy","sad","angry","fearful","disgusted","surprised","FaceApi","video","React","createRef","state","expressions","log","console","run","a","faceApi","tinyFaceDetector","load","navigator","mediaDevices","getUserMedia","facingMode","mediaStream","current","srcObject","name","message","stack","onPlay","paused","ended","params","setTimeout","options","inputSize","scoreThreshold","withFaceExpressions","result","reduce","acc","expression","probability","push","setState","this","style","display","minHeight","justifyContent","sort","b","filter","_","i","map","e","w","textAlign","fontSize","position","ref","autoPlay","muted","width","left","right","bottom","top","Component","routes","path","component","to","src","logo","alt","Routes","props","index","exact","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b7ffe61b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/McHeart.baa1962e.png\";","import { FC } from \"react\";\nimport styled from \"styled-components\";\nimport logo from 'assets/McHeart.png';\nimport { Link } from \"react-router-dom\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  text-align: center;\n  a {\n    text-align: center;\n  }\n  img {\n    width: 40%;\n  }\n`;\n\nexport const Home: FC = () => (\n  <Wrapper>\n    <div>\n      <h1>McHeart</h1>\n      <Link to='/face'>\n        <img src={logo} alt=\"logo\" />\n      </Link>\n    </div>\n  </Wrapper >\n);","// @ts-nocheck\n\nimport React from \"react\";\nimport * as faceApi from \"face-api.js\";\n\nconst expressionMap = {\n  neutral: \"ðŸ˜¶\",\n  happy: \"ðŸ˜„\",\n  sad: \"ðŸ˜ž\",\n  angry: \"ðŸ¤¬\",\n  fearful: \"ðŸ˜–\",\n  disgusted: \"ðŸ¤¢\",\n  surprised: \"ðŸ˜²\"\n};\n\nexport class FaceApi extends React.Component {\n  video = React.createRef();\n\n  state = { expressions: [] };\n\n  componentDidMount() {\n    this.run();\n  }\n\n  log = (...args) => {\n    console.log(...args);\n  };\n\n  run = async () => {\n    this.log(\"run started\");\n    try {\n      await faceApi.nets.tinyFaceDetector.load(\"/models/\");\n      await faceApi.loadFaceExpressionModel(`/models/`);\n      this.mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: { facingMode: \"user\" }\n      });\n\n      this.video.current.srcObject = this.mediaStream;\n    } catch (e) {\n      this.log(e.name, e.message, e.stack);\n    }\n  };\n\n  onPlay = async () => {\n    if (\n      this.video.current.paused ||\n      this.video.current.ended ||\n      !faceApi.nets.tinyFaceDetector.params\n    ) {\n      setTimeout(() => this.onPlay());\n      return;\n    }\n\n    const options = new faceApi.TinyFaceDetectorOptions({\n      inputSize: 512,\n      scoreThreshold: 0.5\n    });\n\n    const result = await faceApi\n      .detectSingleFace(this.video.current, options)\n      .withFaceExpressions();\n\n    if (result) {\n      this.log(result);\n      const expressions = result.expressions.reduce(\n        (acc, { expression, probability }) => {\n          // acc.push([expressionMap[expression], probability]);\n          acc.push([`${expressionMap[expression]} ${expression}`, probability]);\n          return acc;\n        },\n        []\n      );\n      this.log(expressions);\n      this.setState(() => ({ expressions }));\n    }\n\n    setTimeout(() => this.onPlay(), 1000);\n  };\n\n  render() {\n    return (\n      <div style={{\n        display: \"flex\",\n        minHeight: \"100vh\",\n        justifyContent: \"center\",\n      }}>\n        <div>\n          <h1>Face Recognition Webcam</h1>\n          <div>\n            {this.state.expressions\n              .sort((a, b) => b[1] - a[1])\n              .filter((_, i) => i < 3)\n              .map(([e, w], i) => {\n                if (i > 0) return <></>;\n                return (\n                  <p key={e + w} style={{\n                    textAlign: 'center',\n                    fontSize: '40px',\n                  }}>\n                    {e}\n                  </p>\n                )\n              })}\n          </div>\n          <div style={{ position: \"relative\" }}>\n            <video\n              ref={this.video}\n              autoPlay\n              muted\n              onPlay={this.onPlay}\n              style={{\n                position: \"absolute\",\n                width: \"100%\",\n                left: 0,\n                right: 0,\n                bottom: 0,\n                top: 0\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}","import { FC } from \"react\";\nimport { HashRouter } from \"react-router-dom\";\nimport { Route, RouteProps, Switch } from \"react-router\";\n\nimport { FaceApi, Home } from \"pages\";\n\nconst routes: RouteProps[] = [\n  {\n    path: \"/\",\n    component: Home\n  },\n  {\n    path: \"/face\",\n    component: FaceApi\n  }\n];\n\nexport const Routes: FC = () => {\n  return (\n    <HashRouter>\n      <Switch>\n        {routes.map((props, index) => (\n          <Route\n            exact={true}\n            key={index}\n            {...props}\n          />\n        ))}\n      </Switch>\n    </HashRouter>\n  );\n};","import { Routes } from 'Routes';\n\nexport const App = () => (\n  <Routes />\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\n\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}